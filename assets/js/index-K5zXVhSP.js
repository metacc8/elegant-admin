
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as A}from"./index-DR4x_9r6.js";import{a as v}from"./element-plus-DdTkCxgE.js";import{d as N,aj as $,a as d,W as B,X as w,c as y,f as s,a1 as a,_ as z,aw as H,ax as W,$ as X,bi as O,bF as Y,r as C,F as q,aa as G,S,Y as E,a2 as U,m as F,u as g,D as P}from"./@vue-DJ53MWs5.js";import{_ as x}from"./vue-esign-BNnrYaMl.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-C66rOj0F.js";import{_ as K}from"./index-lEBQL-1R.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-BtwM8tsY.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-Dd0W0IWH.js";import"./@imengyu-BQwzwvVc.js";import"./vue-CAygiDOH.js";import"./floating-vue-DjZaMi6K.js";import"./@floating-ui-Y0iFLo_g.js";import"./vue-m-message-BxJX2Zqc.js";import"./overlayscrollbars-CZjZ1Dbc.js";import"./@iconify-C4HLlXtv.js";import"./overlayscrollbars-vue-BxfA_dC8.js";import"./@headlessui-Bm2TyfRI.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-RCkyKLW7.js";import"./lodash-es-l8Yk8yFo.js";import"./pinia-DmVFObHF.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-Bg2mojPD.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BnGu2oZ8.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-PTJBK6lV.js";import"./path-browserify-DTVwunqE.js";import"./axios-DmypytPv.js";import"./@vueuse-Bz9Gvxjd.js";import"./nprogress-BdJdCxhg.js";import"./@element-plus-Ngrzdf6G.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-p2P62yYc.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";const Z=r=>(H("data-v-29fadd92"),r=r(),W(),r),ee={class:"slot"},oe=Z(()=>s("div",{class:"el-upload__text"},[X(" 将文件拖到此处，或"),s("em",null,"点击上传")],-1)),te={key:0,class:"el-upload__tip"},se={style:{display:"inline-block"}},ae=N({name:"FileUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},files:{default:()=>[]},notip:{type:Boolean,default:!1},ext:{default:()=>["zip","rar"]}},emits:["onSuccess"],setup(r,{emit:u}){const l=r,k=u,t=o=>{const p=o.name.split(".").at(-1)??"",f=l.ext.includes(p),c=o.size/1024/1024<l.size;return f||v.error(`上传文件只支持 ${l.ext.join(" / ")} 格式！`),c||v.error(`上传文件大小不能超过 ${l.size}MB！`),f&&c},i=()=>{v.warning("文件上传超过限制")},b=(o,n,p)=>{k("onSuccess",o,n,p)};return(o,n)=>{const p=A,f=$("ElAlert"),c=$("ElUpload");return d(),B(c,{headers:o.headers,action:o.action,data:o.data,name:o.name,"before-upload":t,"on-exceed":i,"on-success":b,"file-list":o.files,limit:o.max,drag:""},{tip:w(()=>[o.notip?z("",!0):(d(),y("div",te,[s("div",se,[a(f,{title:`上传文件支持 ${o.ext.join(" / ")} 格式，单个文件大小不超过 ${o.size}MB，且文件数量不超过 ${o.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:w(()=>[s("div",ee,[a(p,{name:"ep:upload-filled",class:"el-icon--upload"}),oe])]),_:1},8,["headers","action","data","name","file-list","limit"])}}}),ie=x(ae,[["__scopeId","data-v-29fadd92"]]),le={class:"upload-container"},ne={class:"mask"},pe={class:"actions"},ce=["onClick"],re=["onClick"],me=["onClick"],de=["onClick"],ue={key:0,class:"el-upload__tip"},fe={style:{display:"inline-block"}},he=N({name:"ImagesUpload",__name:"index",props:O({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:[]},modelModifiers:{}}),emits:O(["onSuccess"],["update:modelValue"]),setup(r,{emit:u}){const l=r,k=u,t=Y(r,"modelValue"),i=C({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function b(e){i.value.dialogImageIndex=e,i.value.imageViewerVisible=!0}function o(){i.value.imageViewerVisible=!1}function n(e){t.value.splice(e,1)}function p(e,h){h==="left"&&e!==0&&(t.value[e]=t.value.splice(e-1,1,t.value[e])[0]),h==="right"&&e!==t.value.length-1&&(t.value[e]=t.value.splice(e+1,1,t.value[e])[0])}const f=e=>{const I=e.name.split(".").at(-1)??"",m=l.ext.includes(I),V=e.size/1024/1024<l.size;return m||v.error(`上传图片只支持 ${l.ext.join(" / ")} 格式！`),V||v.error(`上传图片大小不能超过 ${l.size}MB！`),m&&V&&(i.value.progress.preview=URL.createObjectURL(e)),m&&V},c=e=>{i.value.progress.percent=~~e.percent},M=e=>{i.value.progress.preview="",i.value.progress.percent=0,k("onSuccess",e)};return(e,h)=>{const I=$("ElImage"),m=A,V=$("ElProgress"),D=$("ElUpload"),L=$("ElAlert"),R=$("ElImageViewer");return d(),y("div",le,[(d(!0),y(q,null,G(t.value,(T,_)=>(d(),y("div",{key:_,class:"images"},[_<e.max?(d(),B(I,{key:0,src:T,style:S(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):z("",!0),s("div",ne,[s("div",pe,[s("span",{title:"预览",onClick:j=>b(_)},[a(m,{name:"ep:zoom-in",class:"icon"})],8,ce),s("span",{title:"移除",onClick:j=>n(_)},[a(m,{name:"ep:delete",class:"icon"})],8,re),E(s("span",{title:"左移",class:F({disabled:_===0}),onClick:j=>p(_,"left")},[a(m,{name:"ep:back",class:"icon"})],10,me),[[U,t.value.length>1]]),E(s("span",{title:"右移",class:F({disabled:_===t.value.length-1}),onClick:j=>p(_,"right")},[a(m,{name:"ep:right",class:"icon"})],10,de),[[U,t.value.length>1]])])])]))),128)),E(a(D,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":f,"on-progress":c,"on-success":M,drag:"",class:"images-upload"},{default:w(()=>[s("div",{class:"image-slot",style:S(`width:${e.width}px;height:${e.height}px;`)},[a(m,{name:"ep:plus",class:"icon"})],4),E(s("div",{class:"progress",style:S(`width:${e.width}px;height:${e.height}px;`)},[a(I,{src:g(i).progress.preview,style:S(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),a(V,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:g(i).progress.percent},null,8,["width","percentage"])],4),[[U,g(i).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[U,t.value.length<e.max]]),e.notip?z("",!0):(d(),y("div",ue,[s("div",fe,[a(L,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),g(i).imageViewerVisible?(d(),B(R,{key:1,"url-list":t.value,"initial-index":g(i).dialogImageIndex,teleported:"",onClose:o},null,8,["url-list","initial-index"])):z("",!0)])}}}),_e=x(he,[["__scopeId","data-v-cba8f4cb"]]),ge=s("p",null,"ImageUpload / ImagesUpload / FileUpload",-1),ve=s("p",{style:{"margin-bottom":"0"}}," 由于线上演示环境开启了 Mock ，会导致上传功能报错，请在本地运行并查看演示 ",-1),$e={class:"py-2"},we={class:"py-2"},ke={class:"py-2"},po=N({name:"ComponentExampleUpload",__name:"index",setup(r){const u=C("https://picsum.photos/750/450"),l=C(["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]),k=C([{name:"xxxx文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]);function t(o){o.error===""?u.value=o.data.path:v.warning(o.error)}function i(o){o.error===""?l.value.push(o.data.path):v.warning(o.error)}function b(o,n,p){o.error===""?k.value.push({name:n.name,url:o.error===""?o.data.path:""}):(p.pop(),v.warning(o.error))}return(o,n)=>{const p=Q,f=K,c=J,M=_e,e=ie;return d(),y("div",null,[a(p,{title:"上传"},{content:w(()=>[ge,ve]),_:1}),a(c,{title:"单图上传"},{default:w(()=>[s("div",$e,[a(f,{modelValue:g(u),"onUpdate:modelValue":n[0]||(n[0]=h=>P(u)?u.value=h:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:t},null,8,["modelValue"])])]),_:1}),a(c,{title:"多图上传（默认最多3张）"},{default:w(()=>[s("div",we,[a(M,{modelValue:g(l),"onUpdate:modelValue":n[1]||(n[1]=h=>P(l)?l.value=h:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:i},null,8,["modelValue"])])]),_:1}),a(c,{title:"文件上传（默认最多3个）"},{default:w(()=>[s("div",ke,[a(e,{files:g(k),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/file",onOnSuccess:b},null,8,["files"])])]),_:1})])}}});export{po as default};
