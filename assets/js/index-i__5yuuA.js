
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as R}from"./index-EBgu0xiU.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-5GddAViN.js";import{d as w,bi as z,bF as q,r as b,aj as m,a as A,W as $,X as h,f as p,a1 as r,S as g,n as D}from"./@vue-DJ53MWs5.js";import{_ as I}from"./vue-esign-BNnrYaMl.js";const M={class:"select-empty"},N={class:"select-close"},j={class:"table-box"},x=w({name:"TableSelect",__name:"index",props:z({requestApi:{},placeholder:{default:"请选择"},size:{default:"default"},clearable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},collapseTagsTooltip:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleported:{type:Boolean,default:!0},selectWidth:{},tableWidth:{default:""},columns:{default:[]},initTableParam:{default:{}},tableProps:{default:()=>({label:"id",value:"name"})}},{modelValue:{default:null},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const a=d,t=q(d,"modelValue"),o=b();function _(){o.value.clearSelection(),o.value.reset()}const f=b();function v(){f.value.blur()}function y(e){e&&_()}function P(){a.multiple?t.value=[]:t.value={}}function T(e){const l=B(e[a.tableProps.value]);o.value.toggleRowSelection(l,!1)}function B(e){return o.value.tableData.find(l=>l[a.tableProps.value]===e)}function C(e){return S(),{list:e&&e.records||[],total:e&&e.total||0}}function S(){a.multiple?D(()=>{var e,l;(l=(e=o.value)==null?void 0:e.tableData)==null||l.forEach(n=>{t.value.forEach(s=>{var i,u,c;s.value===n[a.tableProps.value]&&((u=(i=o.value)==null?void 0:i.selectedList)!=null&&u.some(k=>k[a.tableProps.value]===s.value)||(c=o==null?void 0:o.value)==null||c.toggleRowSelection(n,!0))})})}):o.value.radio=t.value.value}function V(e,l){var n;a.multiple?((n=t.value)==null?void 0:n.some(i=>i.value===l[a.tableProps.value]))?t.value.forEach((i,u)=>{i.value===l[a.tableProps.value]&&t.value.splice(u,1)}):t.value.push({value:l[a.tableProps.value],label:l[a.tableProps.label],...l}):(t.value={value:l[a.tableProps.value],label:l[a.tableProps.label],...l},v())}function W(e){var l,n;a.multiple&&(e.length>0?e.forEach(s=>{var u;((u=t.value)==null?void 0:u.some(c=>c.value===s[a.tableProps.value]))||t.value.push({value:s[a.tableProps.value],label:s[a.tableProps.label],...s})}):(n=(l=o.value)==null?void 0:l.tableData)==null||n.forEach(s=>{t.value.forEach((i,u)=>{i.value===s[a.tableProps.value]&&t.value.splice(u,1)})}))}return(e,l)=>{const n=R,s=m("el-icon"),i=m("el-select");return A(),$(i,{ref_key:"selectTableRef",ref:f,modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u),"popper-class":"tip-dropdown",teleported:e.teleported,"fit-input-width":e.fitInputWidth,style:g({width:e.selectWidth?`${e.selectWidth}`:"100%"}),class:"select-box",size:e.size,clearable:e.clearable,multiple:e.multiple,"collapse-tags":e.collapseTags,"collapse-tags-tooltip":e.collapseTagsTooltip,placeholder:e.placeholder,disabled:e.disabled,onRemoveTag:T,onVisibleChange:y,onClear:P},{empty:h(()=>[p("div",M,[p("div",N,[r(s,{class:"select-close__icon",onClick:v},{default:h(()=>[r(n,{name:"ep:close"})]),_:1})]),p("div",{class:"select-table",style:g({width:e.tableWidth?`${e.tableWidth}`:"100%"})},[p("div",j,[r(E,{ref_key:"proTableRef",ref:o,"search-col":{xs:1,sm:2,md:2,lg:2,xl:2},"init-param":e.initTableParam,"tool-button":!1,"data-callback":C,"show-pagination":!0,"highlight-current-row":"","page-layout":"total, prev, pager, next","request-api":e.requestApi,columns:e.columns,onSelect:V,onSelectAll:W},null,8,["init-param","request-api","columns"])])],4)])]),_:1},8,["modelValue","teleported","fit-input-width","style","size","clearable","multiple","collapse-tags","collapse-tags-tooltip","placeholder","disabled"])}}}),G=I(x,[["__scopeId","data-v-c6438ae6"]]);export{G as _};
