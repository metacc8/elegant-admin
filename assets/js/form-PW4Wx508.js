
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{l as C}from"./element-plus-DdTkCxgE.js";import{d as w,r as c,i as x,k as D,p as k,o as P,b as i,a as u,c as d,a1 as $,X as j,R as f,F,aa as W,U as B,u as E,_ as L}from"./@vue-DJ53MWs5.js";import"./lodash-es-l8Yk8yFo.js";import"./@vueuse-Bz9Gvxjd.js";import"./nprogress-BdJdCxhg.js";import"./@imengyu-BQwzwvVc.js";import"./vue-CAygiDOH.js";import"./@element-plus-Ngrzdf6G.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-p2P62yYc.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-Y0iFLo_g.js";const N={key:0,class:"form-main wh-full! box-border h-full",style:{height:"100%"}},T=w({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(h,{expose:v}){const r=h,t=c(null),l=x("forms",{}),b=c(!0),n=D({});k("formData",n);function s(){return n}function m(e){Object.assign(n,e)}function y(){var e;return(e=t.value)==null?void 0:e.validate()}P(async()=>{var e,a,o,p;if(((e=r.componentSchema)==null?void 0:e.type)==="form"&&l.value&&t.value){const g=((o=(a=r.componentSchema)==null?void 0:a.componentProps)==null?void 0:o.name)??((p=r.componentSchema)==null?void 0:p.name)??"default";return l.value[g]=t.value,t.value.getData=s,t.value.setData=m,!1}});const _=i(()=>{const e=r.componentSchema.componentProps;let a=e.labelCol,o=e.wrapperCol;return e.labelLayout==="fixed"&&(a={style:`width:${typeof e.labelWidth=="number"?`${e.labelWidth}px`:e.labelWidth}`},o={style:"width:auto;flex:1"}),{...e,labelCol:a,wrapperCol:o}}),S=i(()=>r.componentSchema.children??[]);return v({form:t,getData:s,setData:m,validate:y}),(e,a)=>b.value?(u(),d("div",N,[$(E(C),B({ref_key:"form",ref:t,model:n},_.value,{style:{height:"100%"}}),{default:j(()=>[f(e.$slots,"edit-node",{},()=>[(u(!0),d(F,null,W(S.value,o=>f(e.$slots,"node",{componentSchema:o})),256))])]),_:3},16,["model"])])):L("",!0)}});export{T as default};
