
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{r as ut}from"./vue-CAygiDOH.js";var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}function dt(R){if(R.__esModule)return R;var K=R.default;if(typeof K=="function"){var E=function e(){return this instanceof e?Reflect.construct(K,arguments,this.constructor):K.apply(this,arguments)};E.prototype=K.prototype}else E={};return Object.defineProperty(E,"__esModule",{value:!0}),Object.keys(R).forEach(function(e){var A=Object.getOwnPropertyDescriptor(R,e);Object.defineProperty(E,e,A.get?A:{enumerable:!0,get:function(){return R[e]}})}),E}var ie={exports:{}};(function(R,K){(function(E,e){e(K,ut)})(at,function(E,e){let A=null;function ke(){return A!==null}function xe(t){A&&ce(),A=t}function se(t){t===A&&(A=null)}function ce(){A&&(A.closeMenu(),A=null)}const L={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function $(t,n){let u=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(u-=t.offsetParent.scrollTop,u+=$(t.offsetParent,n)),u}function D(t,n){let u=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(u-=t.offsetParent.scrollLeft,u+=D(t.offsetParent,n)),u}function ge(t,n,u,s){return{x:D(t,s)+n,y:$(t,s)+u}}const ne="mx-menu-default-container",be="mx-menu-container-";let ye=0;function de(t){const{getContainer:n,zIndex:u}=t;if(n){const m=typeof n=="function"?n():n;if(m){let p=m.getAttribute("id");return p||(p=be+ye++,m.setAttribute("id",p)),{eleId:p,container:m,isNew:!1}}}let s=document.getElementById(ne);return s||(s=document.createElement("div"),s.setAttribute("id",ne),s.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(s)),s.style.zIndex=(u==null?void 0:u.toString())||L.defaultZindex.toString(),{eleId:ne,container:s,isNew:!0}}function Me(t){return typeof t=="number"?`${t}px`:t}const T=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:u}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(u.value):n.value}}),U=(t,n)=>{const u=t.__vccOpts||t;for(const[s,m]of n)u[s]=m;return u},Se={},Be={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},we=[e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1)];function Pe(t,n){return e.openBlock(),e.createElementBlock("svg",Be,we)}const We=U(Se,[["render",Pe]]),Ie={},Oe={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ee=[e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1)];function Ne(t,n){return e.openBlock(),e.createElementBlock("svg",Oe,Ee)}const me=U(Ie,[["render",Ne]]),Re={class:"mx-item-row"},je=["xlink:href"],Ve={key:1,class:"label"},He={class:"mx-item-row"},Fe={class:"mx-shortcut"},q=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:u}){const s=t,m=u,{clickHandler:p,clickClose:l,clickableWhenHasChildren:S,disabled:k,hidden:c,label:o,icon:P,iconFontClass:w,showRightArrow:j,shortcut:M,hasChildren:v}=e.toRefs(s),h=e.ref(!1),d=e.ref(!1),i=e.ref(),f=e.inject("globalOptions"),x=e.inject("globalHasSlot"),a=e.inject("globalRenderSlot"),B=e.inject("globalCloseMenu"),y=e.inject("menuContext"),W={showSubMenu:()=>h.value?(y.markActiveMenuItem(W,!0),!0):v.value?(F(),!0):!1,isDisabledOrHidden:()=>k.value||c.value,getElement:()=>i.value,focus:()=>d.value=!0,blur:()=>d.value=!1,click:V};e.onMounted(()=>{y.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let C=0;const H=y.getElement();if(H){let z=0;for(let g=0;g<H.children.length;g++){const _=H.children[g];if(_.getAttribute("data-type")==="ContextMenuItem"){if(_===i.value){C=z;break}z++}}}y.addChildMenuItem(W,C)}):y.addChildMenuItem(W)}),e.onBeforeUnmount(()=>{y.removeChildMenuItem(W)});function V(C){if(!k.value){if(C){const H=C.target;if(H.classList.contains("mx-context-no-clickable")||f.value.ignoreClickClassName&&H.classList.contains(f.value.ignoreClickClassName))return;if(f.value.clickCloseClassName&&H.classList.contains(f.value.clickCloseClassName)){C.stopPropagation(),B(s.rawMenuItem);return}}v.value?S.value?(typeof p.value=="function"&&p.value(C),m("click",C)):h.value||F():(typeof p.value=="function"&&p.value(C),m("click",C),l.value&&B(s.rawMenuItem))}}function F(C){d.value=!1,y.checkCloseOtherSubMenuTimeOut()||y.closeOtherSubMenu(),k.value||(y.markActiveMenuItem(W),v.value&&(C||y.markThisOpenedByKeyBoard(),y.addOpenedSubMenu(()=>{d.value=!1,h.value=!1,m("subMenuClose")}),h.value=!0,m("subMenuOpen")))}function N(){return{disabled:k.value,label:o.value,icon:P.value,iconFontClass:w.value,showRightArrow:j.value,clickClose:l.value,clickableWhenHasChildren:S.value,shortcut:M.value,theme:f.value.theme,isOpen:h,hasChildren:v,onClick:V,onMouseEnter:F,closeMenu:B}}return n({showSubMenu:h,keyBoardFocusMenu:d}),(C,H)=>e.unref(c)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:i,"data-type":"ContextMenuItem"},[e.unref(x)("itemRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemRender",N())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(T),{key:1,vnode:t.customRender,data:N()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(k)?"disabled":"",d.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",h.value?"open":""]),onClick:V,onMouseenter:F},[e.renderSlot(C.$slots,"default",{},()=>[e.createElementVNode("div",Re,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(C.$slots,"icon",{},()=>[e.unref(x)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemIconRender",N())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,je)],16)):typeof e.unref(P)!="string"?(e.openBlock(),e.createBlock(e.unref(T),{key:2,vnode:e.unref(P),data:e.unref(P)},null,8,["vnode","data"])):typeof e.unref(P)=="string"&&e.unref(P)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(P)+" icon "+e.unref(w)+" "+e.unref(f).iconFontClass)},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(C.$slots,"check",{key:0},()=>[e.unref(x)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemCheckRender",N())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(We)]):e.createCommentVNode("",!0)],2),e.renderSlot(C.$slots,"label",{},()=>[e.unref(x)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemLabelRender",N())},null,8,["vnode"])):typeof e.unref(o)=="string"?(e.openBlock(),e.createElementBlock("span",Ve,e.toDisplayString(e.unref(o)),1)):(e.openBlock(),e.createBlock(e.unref(T),{key:2,vnode:e.unref(o),data:e.unref(o)},null,8,["vnode","data"]))])]),e.createElementVNode("div",He,[e.unref(M)?e.renderSlot(C.$slots,"shortcut",{key:0},()=>[e.unref(x)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemShortcutRender",N())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",Fe,e.toDisplayString(e.unref(M)),1)]):e.createCommentVNode("",!0),e.unref(j)?e.renderSlot(C.$slots,"rightArrow",{key:1},()=>[e.unref(x)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(T),{key:0,vnode:()=>e.unref(a)("itemRightArrowRender",N())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(me)]):e.createCommentVNode("",!0)])])],34)),e.unref(f).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(f).menuTransitionProps)),{default:e.withCtx(()=>[h.value?e.renderSlot(C.$slots,"submenu",{key:0}):e.createCommentVNode("",!0)]),_:3},16)):h.value?e.renderSlot(C.$slots,"submenu",{key:4}):e.createCommentVNode("",!0)],512))}}),Ae=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:T},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),Le={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Te(t,n,u,s,m,p){const l=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(l,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",Le))}const J=U(Ae,[["render",Te]]),ze=e.defineComponent({name:"ContextSubMenu",components:{ContextMenuItem:q,ContextMenuSeparator:J,ContextMenuIconRight:me},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const n=e.inject("menuContext"),u=e.inject("globalOptions"),s=e.inject("globalHasSlot"),m=e.inject("globalRenderSlot"),{zIndex:p,getParentWidth:l,getParentHeight:S}=n,{adjustPosition:k}=e.toRefs(t),c=e.ref(),o=e.ref(),P=e.ref(),w=[],j=e.inject("globalSetCurrentSubMenu"),M=[];let v=null,h=0;function d(){v&&v.blur()}function i(r,b){if(r){for(let I=b!==void 0?b:0;I<M.length;I++)if(!M[I].isDisabledOrHidden()){f(I);break}}else for(let I=b!==void 0?b:M.length-1;I>=0;I--)if(!M[I].isDisabledOrHidden()){f(I);break}}function f(r){if(v&&d(),r!==void 0&&(v=M[Math.max(0,Math.min(r,M.length-1))]),!!v&&(v.focus(),z.value)){const b=v.getElement();b&&(V.value=Math.min(Math.max(-F.value,-b.offsetTop-b.offsetHeight+_.value),0))}}function x(){j(a)}const a={isTopLevel:()=>n.getParentContext()===null,closeSelfAndActiveParent:()=>{const r=W.getParentContext();if(r){r.closeOtherSubMenu();const b=r.getSubMenuInstanceContext();if(b)return b.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var r;return(r=W.getParentContext())==null?void 0:r.closeOtherSubMenu()},moveCurrentItemFirst:()=>i(!0),moveCurrentItemLast:()=>i(!1),moveCurrentItemDown:()=>i(!0,v?M.indexOf(v)+1:0),moveCurrentItemUp:()=>i(!1,v?M.indexOf(v)-1:0),focusCurrentItem:()=>f(),openCurrentItemSubMenu:()=>v?v==null?void 0:v.showSubMenu():!1,triggerCurrentItemClick:r=>v==null?void 0:v.click(r)};let B=!1,y=!1;const W={zIndex:p+1,container:n.container,adjustPadding:u.value.adjustPadding||L.defaultAdjustPadding,getParentWidth:()=>{var r;return((r=c.value)==null?void 0:r.offsetWidth)||0},getParentHeight:()=>{var r;return((r=c.value)==null?void 0:r.offsetHeight)||0},getParentX:()=>g.value.x,getParentY:()=>g.value.y,getParentAbsX:()=>c.value?D(c.value,n.container):0,getParentAbsY:()=>c.value?$(c.value,n.container):0,getPositon:()=>[0,0],addOpenedSubMenu(r){w.push(r)},closeOtherSubMenu(){w.forEach(r=>r()),w.splice(0,w.length),j(a)},checkCloseOtherSubMenuTimeOut(){return h?(clearTimeout(h),h=0,!0):!1},closeOtherSubMenuWithTimeOut(){h=setTimeout(()=>{h=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(r,b)=>{b===void 0?M.push(r):M.splice(b,0,r)},removeChildMenuItem:r=>{M.splice(M.indexOf(r),1)},markActiveMenuItem:(r,b=!1)=>{d(),v=r,b&&f()},markThisOpenedByKeyBoard:()=>{B=!0},isOpenedByKeyBoardFlag:()=>B?(B=!1,!0):!1,isMenuItemDataCollectedFlag:()=>y,getElement:()=>c.value||null,getParentContext:()=>n,getSubMenuInstanceContext:()=>a};e.provide("menuContext",W);const V=e.ref(0),F=e.ref(0);function N(r){r?V.value=Math.min(Math.max(V.value-50,-F.value),0):V.value=Math.min(V.value+50,0)}function C(r){r.preventDefault(),r.stopPropagation(),N(r.deltaY>0)}function H(r){u.value.mouseScroll&&(r.preventDefault(),r.stopPropagation(),N(r.deltaY>0))}const z=e.ref(!1),g=e.ref({x:0,y:0}),_=e.ref(0);return e.onMounted(()=>{const r=n.getPositon();g.value={x:r[0]??u.value.xOffset??0,y:r[1]??u.value.yOffset??0},j(a),e.nextTick(()=>{var b,I;const O=c.value;if(O&&o.value){const{container:Y}=n,le=(l==null?void 0:l())??0,tt=(S==null?void 0:S())??0,ee=typeof n.adjustPadding=="number"?n.adjustPadding:((b=n.adjustPadding)==null?void 0:b.x)??0,te=typeof n.adjustPadding=="number"?n.adjustPadding:((I=n.adjustPadding)==null?void 0:I.y)??0,G=tt>0?te:0,nt=document.documentElement.scrollHeight,ot=document.documentElement.scrollWidth,lt=Math.min(ot,Y.offsetWidth),re=Math.min(nt,Y.offsetHeight);let ue=D(O,Y),ae=$(O,Y);t.direction.includes("l")?g.value.x-=O.offsetWidth+ee:t.direction.includes("r")?g.value.x+=le+ee:(g.value.x+=le/2,g.value.x-=(O.offsetWidth+ee)/2),t.direction.includes("t")?g.value.y-=O.offsetHeight+te*2:t.direction.includes("b")?g.value.y-=te:g.value.y-=(O.offsetHeight+te)/2,k.value&&e.nextTick(()=>{ue=D(O,Y),ae=$(O,Y);const rt=ue+O.offsetWidth-lt,Ce=ae+O.offsetHeight+G*2-re;if(z.value=Ce>0,F.value=O.offsetHeight-re+G*2,rt>0){const X=le+O.offsetWidth-ee,Z=ue;X>Z?g.value.x-=Z:g.value.x-=X}if(z.value){const X=Ce,Z=ae;X>Z?g.value.y-=Z-G:g.value.y-=X-G,_.value=re-G*2}else _.value=0})}O==null||O.focus({preventScroll:!0}),n.isOpenedByKeyBoardFlag()&&i(!0),y=!0})}),{menu:c,scroll:o,options:u,zIndex:p,constOptions:L,scrollValue:V,upScrollButton:P,overflow:z,position:g,scrollHeight:F,maxHeight:_,globalHasSlot:s,globalRenderSlot:m,onScroll:N,onSubMenuBodyClick:x,onMouseWhell:H,onMouseWhellMx:C,solveNumberOrStringSize:Me}}}),_e={key:0,class:"mx-context-menu-updown placeholder"},$e={key:1,class:"mx-context-menu-updown placeholder"},De={class:"mx-context-menu-scroll",ref:"scroll"};function Ke(t,n,u,s,m,p){const l=e.resolveComponent("ContextMenuSeparator"),S=e.resolveComponent("ContextSubMenu",!0),k=e.resolveComponent("ContextMenuItem"),c=e.resolveComponent("ContextMenuIconRight");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-context-menu",t.options.customClass?t.options.customClass:"",t.options.theme??""]),style:e.normalizeStyle({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:n[4]||(n[4]=(...o)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...o)),onWheel:n[5]||(n[5]=(...o)=>t.onMouseWhell&&t.onMouseWhell(...o))},[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref:"menu",style:e.normalizeStyle({top:`${t.scrollValue}px`})},[e.renderSlot(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",_e)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(o,P)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:P},[o.hidden!==!0&&o.divided==="up"?(e.openBlock(),e.createBlock(l,{key:0})):e.createCommentVNode("",!0),o.hidden!==!0&&o.divided==="self"?(e.openBlock(),e.createBlock(l,{key:1})):(e.openBlock(),e.createBlock(k,{key:2,clickHandler:o.onClick?w=>o.onClick(w):void 0,disabled:o.disabled,hidden:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:o.onSubMenuOpen,onSubMenuClose:o.onSubMenuClose},e.createSlots({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:e.withCtx(()=>[e.createVNode(S,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:t.options.adjustPosition,direction:o.direction!==void 0?o.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(e.openBlock(),e.createBlock(l,{key:3})):e.createCommentVNode("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",$e)):e.createCommentVNode("",!0)])],4),e.createElementVNode("div",De,[e.withDirectives(e.createElementVNode("div",{ref:"upScrollButton",class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:n[0]||(n[0]=o=>t.onScroll(!1)),onWheel:n[1]||(n[1]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(c)],34),[[e.vShow,t.overflow]]),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:n[2]||(n[2]=o=>t.onScroll(!0)),onWheel:n[3]||(n[3]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(c)],34),[[e.vShow,t.overflow]])],512)],38)}const Q=U(ze,[["render",Ke]]),Ye={class:"mx-menu-ghost-host"},fe=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:u}){const s=t,m=u,p=e.useSlots(),{options:l,show:S,container:k}=e.toRefs(s);e.onMounted(()=>{S.value&&P()}),e.onBeforeUnmount(()=>{v()}),e.watch(S,a=>{a?P():(se(c),v())});const c={closeMenu:w,isClosed:j};let o=!1;function P(){M(),xe(c)}function w(a){o=!0,m("close",a),l.value.menuTransitionProps||m("closeAnimFinished"),se(c)}function j(){return o}function M(){setTimeout(()=>{document.addEventListener("click",f,!0),document.addEventListener("contextmenu",f,!0),document.addEventListener("scroll",i,!0),!s.isFullScreenContainer&&k.value&&k.value.addEventListener("scroll",i,!0),l.value.keyboardControl!==!1&&document.addEventListener("keydown",d)},50)}function v(){document.removeEventListener("contextmenu",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("scroll",i,!0),!s.isFullScreenContainer&&k.value&&k.value.removeEventListener("scroll",i,!0),l.value.keyboardControl!==!1&&document.removeEventListener("keydown",d)}const h=e.ref();e.provide("globalSetCurrentSubMenu",a=>h.value=a);function d(a){var B,y,W,V,F,N,C,H,z,g,_,r,b;let I=!0;switch(a.key){case"Escape":{((B=h.value)==null?void 0:B.isTopLevel())===!1?(y=h.value)==null||y.closeCurrentSubMenu():w();break}case"ArrowDown":(W=h.value)==null||W.moveCurrentItemDown();break;case"ArrowUp":(V=h.value)==null||V.moveCurrentItemUp();break;case"Home":(F=h.value)==null||F.moveCurrentItemFirst();break;case"End":(N=h.value)==null||N.moveCurrentItemLast();break;case"ArrowLeft":{(C=h.value)!=null&&C.closeSelfAndActiveParent()||(z=(H=l.value).onKeyFocusMoveLeft)==null||z.call(H);break}case"ArrowRight":(g=h.value)!=null&&g.openCurrentItemSubMenu()||(r=(_=l.value).onKeyFocusMoveRight)==null||r.call(_);break;case"Enter":(b=h.value)==null||b.triggerCurrentItemClick(a);break;default:I=!1;break}I&&h.value&&(a.stopPropagation(),a.preventDefault())}function i(){l.value.closeWhenScroll!==!1&&w()}function f(a){x(a.target,a)}function x(a,B){for(var y,W;a;){if(a.classList&&a.classList.contains("mx-menu-host"))return;a=a.parentNode}l.value.clickCloseOnOutside!==!1?(v(),w()):(W=(y=l.value).onClickOnOutside)==null||W.call(y,B)}return e.provide("globalOptions",l),e.provide("globalCloseMenu",w),e.provide("globalIsFullScreenContainer",s.isFullScreenContainer),e.provide("globalHasSlot",a=>p[a]!==void 0),e.provide("globalRenderSlot",(a,B)=>e.renderSlot(p,a,{...B},()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:l.value.zIndex||L.defaultZindex,container:k.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>l.value.x,getParentAbsX:()=>l.value.y,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[l.value.x,l.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(c),(a,B)=>(e.openBlock(),e.createElementBlock("div",Ye,[e.unref(l).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(l).menuTransitionProps,{onAfterLeave:B[0]||(B[0]=y=>m("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(S)?(e.openBlock(),e.createBlock(Q,{key:0,class:"mx-menu-host",items:e.unref(l).items,adjustPosition:e.unref(l).adjustPosition,maxWidth:e.unref(l).maxWidth||e.unref(L).defaultMaxWidth,minWidth:e.unref(l).minWidth||e.unref(L).defaultMinWidth,direction:e.unref(l).direction||e.unref(L).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(S)?(e.openBlock(),e.createBlock(Q,{key:1,class:"mx-menu-host",items:e.unref(l).items,adjustPosition:e.unref(l).adjustPosition,maxWidth:e.unref(l).maxWidth||e.unref(L).defaultMaxWidth,minWidth:e.unref(l).minWidth||e.unref(L).defaultMinWidth,direction:e.unref(l).direction||e.unref(L).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]))}}),pe=e.defineComponent({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,n){const{options:u,show:s}=e.toRefs(t);return n.expose({closeMenu:()=>n.emit("update:show",!1),isClosed:()=>!s.value}),()=>{const{isNew:m,container:p,eleId:l}=de(u.value);return[e.h(e.Teleport,{to:`#${l}`},[e.h(fe,{options:u,show:s,container:p,isFullScreenContainer:!m,onClose:S=>{var k,c;n.emit("update:show",!1),n.emit("close"),(c=(k=u.value).onClose)==null||c.call(k,S)}},n.slots)])]}}}),ve=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const u=e.inject("globalOptions"),{adjustSubMenuPosition:s,maxWidth:m,minWidth:p}=e.toRefs(t),l=typeof s.value<"u"?s.value:u.value.adjustPosition;return()=>e.h(q,{...t,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0},n.slots.default?{submenu:()=>e.h(Q,{maxWidth:m.value,minWidth:p.value,adjustPosition:l},{default:n.slots.default})}:void 0)}});function Ue(t,n,u,s){const m=e.ref(!0),p=e.h(fe,{options:t,show:m,container:n,isFullScreenContainer:!u,onCloseAnimFinished:()=>{e.render(null,n)},onClose:l=>{var S;(S=t.onClose)==null||S.call(t,l),m.value=!1}},s);return e.render(p,n),p.component}function he(t,n){const u=de(t);return Ue(t,u.container,u.isNew,n).exposed}const oe={install(t){t.config.globalProperties.$contextmenu=he,t.component("ContextMenu",pe),t.component("ContextMenuItem",q),t.component("ContextMenuGroup",ve),t.component("ContextMenuSperator",J),t.component("ContextMenuSeparator",J),t.component("ContextSubMenu",Q)},showContextMenu(t,n){return he(t,n)},isAnyContextMenuOpen(){return ke()},closeContextMenu:ce,transformMenuPosition:ge},Ge={},Xe={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},Ze=[e.createElementVNode("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),e.createElementVNode("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),e.createElementVNode("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1)];function qe(t,n){return e.openBlock(),e.createElementBlock("svg",Xe,Ze)}const Je=U(Ge,[["render",qe]]),Qe=["onClick","onMouseenter"],et=e.defineComponent({__name:"MenuBar",props:{options:{type:Object,default:null}},setup(t){const n=t,u=e.ref(),s=e.ref(!1),m=e.ref([]),p=e.ref(null);function l(){s.value=!0}function S(){s.value=!1}e.onMounted(()=>{m.value=n.options.items||[]}),e.watch(()=>n.options,()=>{m.value=n.options.items||[]});let k=null,c=-1;function o(){c<m.value.length-1?c++:c=0,j(c,m.value[c])}function P(){c>0?c--:c=m.value.length-1,j(c,m.value[c])}function w(d){const i=n.options.barPopDirection??"bl";let f=0,x=0;return i.startsWith("b")?x=$(d)+d.offsetHeight:i.startsWith("t")?x=$(d):x=$(d)+d.offsetHeight/2,i.endsWith("l")?f=D(d):i.startsWith("r")?f=D(d)+d.offsetWidth:f=D(d)+d.offsetWidth/2,{x:f,y:x}}function j(d,i){var f;if(c=d,!i.children)return;k&&(k.closeMenu(),k=null,s.value=!0),p.value=i;const x=(f=u.value)==null?void 0:f.children[d];if(x){const{x:a,y:B}=w(x);k=oe.showContextMenu({...n.options,items:i.children,x:a,y:B,onKeyFocusMoveLeft(){P()},onKeyFocusMoveRight(){o()},onClose(){p.value==i&&(s.value=!1,p.value=null)}})}}function M(){c=0;const d=u.value;if(d){const{x:i,y:f}=w(d);k=oe.showContextMenu({...n.options,x:i,y:f})}}function v(d,i){i?(s.value=!0,j(d,i),i.onClick&&(i.clickableWhenHasChildren===!0&&i.children&&i.children.length>0||!i.children||i.children.length===0)&&i.onClick()):M()}function h(d,i){s.value&&j(d,i)}return(d,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-menu-bar",t.options.theme??"",t.options.mini?"mini":""]),onFocus:l,onBlur:S},[e.renderSlot(d.$slots,"prefix"),t.options.mini?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"menuBarContent",ref:u,class:"mx-menu-bar-content"},[e.createElementVNode("div",{class:"mx-menu-bar-item",onClick:i[0]||(i[0]=f=>v(0,null))},[e.createVNode(Je)])],512)):(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"menuBarContent",ref:u,class:"mx-menu-bar-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(f,x)=>(e.openBlock(),e.createElementBlock("div",{key:x,class:e.normalizeClass(["mx-menu-bar-item",f==p.value?"active":""]),onClick:a=>v(x,f),onMouseenter:a=>h(x,f)},e.toDisplayString(f.label),43,Qe))),128))],512)),e.renderSlot(d.$slots,"suffix")],34))}});E.ContextMenu=pe,E.ContextMenuGroup=ve,E.ContextMenuItem=q,E.ContextMenuSeparator=J,E.MenuBar=et,E.default=oe,Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(ie,ie.exports);var st=ie.exports;const mt=it(st);export{mt as C,it as a,at as c,dt as g};
