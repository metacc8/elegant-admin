
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{k as oe,o as re,t as le,d as Y,r as u,a as j,c as A,f as s,u as t,S as G,Y as L,a2 as q,a1 as e,X as o,aj as R,a0 as ae,ab as z,$ as y,a8 as N,_ as se,aw as ne,ax as ie}from"./@vue-DJ53MWs5.js";import{u as de,a as pe,g as K,_ as ue,s as ce,r as me,b as ge}from"./index-Cq3st1AW.js";import{C as fe}from"./index-Dh1FiE2b.js";import"./crypto-js-RCkyKLW7.js";import{b as he,u as _e}from"./vue-router-Bg2mojPD.js";import{d as we,a as X}from"./element-plus-DdTkCxgE.js";import{_ as ve}from"./vue-esign-BNnrYaMl.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-Dd0W0IWH.js";import"./@imengyu-BQwzwvVc.js";import"./vue-CAygiDOH.js";import"./floating-vue-DjZaMi6K.js";import"./@floating-ui-Y0iFLo_g.js";import"./vue-m-message-BxJX2Zqc.js";import"./overlayscrollbars-CZjZ1Dbc.js";import"./@iconify-C4HLlXtv.js";import"./overlayscrollbars-vue-BxfA_dC8.js";import"./@headlessui-Bm2TyfRI.js";import"./mitt-DJ65BbbF.js";import"./lodash-es-l8Yk8yFo.js";import"./pinia-DmVFObHF.js";import"./vue-demi-Dq6ymT-8.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BnGu2oZ8.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-PTJBK6lV.js";import"./path-browserify-DTVwunqE.js";import"./axios-DmypytPv.js";import"./@vueuse-Bz9Gvxjd.js";import"./nprogress-BdJdCxhg.js";import"./@element-plus-Ngrzdf6G.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-p2P62yYc.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";function ye(b){const n=oe({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",width:130,height:46,imgCode:""}),i=(r,f)=>Number.parseInt(Math.random()*(f-r+1)+r),x=(r,f)=>{const d=i(r,f),c=i(r,f),h=i(r,f);return`rgb(${d},${c},${h})`},v=()=>{const r=b.value.getContext("2d");r.fillStyle="#ffffff",r.fillRect(0,0,n.width,n.height);let f="";for(let d=0;d<4;d++){const c=n.pool[i(0,n.pool.length-1)],h=i(18,40),E=i(-30,30);r.font=`${h}px Simhei`,r.textBaseline="middle",r.textAlign="center",r.fillStyle=x(80,150),r.save(),r.translate(30*d+15,15),r.rotate(E*Math.PI/180),r.fillText(c,5,10),r.restore(),f+=c}for(let d=0;d<5;d++)r.beginPath(),r.moveTo(i(0,n.width),i(0,n.height)),r.lineTo(i(0,n.width),i(0,n.height)),r.strokeStyle=x(180,230),r.closePath(),r.stroke();for(let d=0;d<40;d++)r.beginPath(),r.arc(i(0,n.width),i(0,n.height),1,0,2*Math.PI),r.closePath(),r.fillStyle=x(150,200),r.fill();return f};re(()=>{v(),n.imgCode=v()});const k=()=>{v(),n.imgCode=v()};return{...le(n),handleDraw:k,verify:b}}const be=["width","height"],xe=Y({name:"ImgVerify",__name:"index",setup(b,{expose:n}){const i=u(null),{width:x,height:v,handleDraw:k,imgCode:r}=ye(i);return n({imgCode:r}),(f,d)=>(j(),A("div",{style:G({width:"131px",height:`${t(v)}px`,cursor:"pointer"})},[s("canvas",{ref_key:"verify",ref:i,width:t(x),height:t(v),onClick:d[0]||(d[0]=(...c)=>t(k)&&t(k)(...c))},null,8,be)],4))}}),T=b=>(ne("data-v-b6ecbe54"),b=b(),ie(),b),Ve={class:"login-container"},ke=["src"],Ce={id:"login-box"},Re={class:"title-container"},Se=["src"],Ee={class:"title"},Ue={class:"verify-img"},Pe={class:"flex-bar"};const Be=T(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),Ie={class:"sub-link"},$e=T(()=>s("span",{class:"text"},"已经有帐号?",-1)),Fe=T(()=>s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),Le={class:"sub-link"},qe=Y({__name:"index",setup(b){var D;const n=he(),i=_e(),x=de(),v=pe(),k=new URL(""+new URL("../png/login-bg-BXj9mcoZ.png",import.meta.url).href,import.meta.url).href,r=new URL(""+new URL("../png/login-banner-BXBHY6Bw.png",import.meta.url).href,import.meta.url).href,f=new URL(""+new URL("../png/logo-BDKWVG5T.png",import.meta.url).href,import.meta.url).href,d="Elegant-admin 管理系统",c=u("login"),h=u(!1),E=u(((D=n.query.redirect)==null?void 0:D.toString())??x.settings.home.fullPath),U=u(),g=u({account:K("login_account")||"admin",password:"123456",verifyCode:"",remember:!!K("login_account")}),M=u(null);function H(C,l,p){var m;l?l!==((m=M.value)==null?void 0:m.imgCode)?p(new Error("请输入正确的验证码")):p():p(new Error("请输入验证码"))}const W=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],verifyCode:[{required:!0,trigger:"blur",validator:H}]});function P(){U.value&&U.value.validate(C=>{C&&(h.value=!0,v.login(g.value).then(()=>{h.value=!1,g.value.remember?ce("login_account",g.value.account):me("login_account"),i.push(E.value),we({title:ge(),message:`欢迎登录 ${d}`,type:"success",duration:3e3})}).catch(()=>{h.value=!1}))})}const B=u(),_=u({account:"",captcha:"",password:"",checkPassword:""}),Z=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(C,l,p)=>{l!==_.value.password?p(new Error("两次输入的密码不一致")):p()}}]});function J(){X({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),B.value&&B.value.validate(C=>{})}const I=u(),V=u({account:localStorage.login_account,captcha:"",newPassword:""}),O=u({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function Q(){X({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),I.value&&I.value.validate(C=>{})}return(C,l)=>{const p=ue,m=R("ElInput"),w=R("ElFormItem"),ee=xe,te=R("ElCheckbox"),$=R("ElLink"),S=R("ElButton"),F=R("ElForm");return j(),A("div",Ve,[s("div",{class:"bg-banner",style:G({backgroundImage:`url(${t(k)})`})},[s("img",{class:"login-banner",src:t(r),alt:""},null,8,ke)],4),s("div",Ce,[L(e(F,{ref_key:"loginFormRef",ref:U,model:t(g),rules:t(W),class:"login-form"},{default:o(()=>[s("div",Re,[s("img",{src:t(f),class:"logo",alt:""},null,8,Se),s("h3",Ee," 欢迎来到 "+ae(t(d))+" ! 👋🏻 ",1)]),s("div",null,[e(w,{prop:"account"},{default:o(()=>[e(m,{modelValue:t(g).account,"onUpdate:modelValue":l[0]||(l[0]=a=>t(g).account=a),placeholder:"用户名",clearable:"",type:"text",tabindex:"1"},{prefix:o(()=>[e(p,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"password"},{default:o(()=>[e(m,{modelValue:t(g).password,"onUpdate:modelValue":l[1]||(l[1]=a=>t(g).password=a),type:"password",clearable:"",placeholder:"密码",tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:z(P,["enter"])},{prefix:o(()=>[e(p,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"verifyCode"},{default:o(()=>[e(m,{modelValue:t(g).verifyCode,"onUpdate:modelValue":l[2]||(l[2]=a=>t(g).verifyCode=a),class:"verify-code",type:"text",clearable:"",maxlength:"4",placeholder:"验证码",tabindex:"3",onKeyup:z(P,["enter"])},{prefix:o(()=>[e(p,{name:"lucide:shield-check"})]),append:o(()=>[s("div",Ue,[e(ee,{ref_key:"imgVerifyRef",ref:M},null,512)])]),_:1},8,["modelValue"])]),_:1})]),s("div",Pe,[e(te,{modelValue:t(g).remember,"onUpdate:modelValue":l[3]||(l[3]=a=>t(g).remember=a)},{default:o(()=>[y(" 记住我 ")]),_:1},8,["modelValue"]),e($,{type:"primary",underline:!1,onClick:l[4]||(l[4]=a=>c.value="reset")},{default:o(()=>[y(" 忘记密码了? ")]),_:1})]),e(S,{loading:t(h),type:"primary",round:"",size:"large",style:{width:"100%"},onClick:N(P,["prevent"])},{default:o(()=>[y(" 登录 ")]),_:1},8,["loading"]),se("",!0)]),_:1},8,["model","rules"]),[[q,t(c)==="login"]]),L(e(F,{ref_key:"registerFormRef",ref:B,model:t(_),rules:t(Z),class:"login-form","auto-complete":"on"},{default:o(()=>[Be,s("div",null,[e(w,{prop:"account"},{default:o(()=>[e(m,{modelValue:t(_).account,"onUpdate:modelValue":l[6]||(l[6]=a=>t(_).account=a),clearable:"",placeholder:"用户名",tabindex:"1"},{prefix:o(()=>[e(p,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"captcha"},{default:o(()=>[e(m,{modelValue:t(_).captcha,"onUpdate:modelValue":l[7]||(l[7]=a=>t(_).captcha=a),clearable:"",placeholder:"验证码",tabindex:"2"},{prefix:o(()=>[e(p,{name:"lucide:shield-check"})]),append:o(()=>[e(S,null,{default:o(()=>[y("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"password"},{default:o(()=>[e(m,{modelValue:t(_).password,"onUpdate:modelValue":l[8]||(l[8]=a=>t(_).password=a),clearable:"",type:"password",placeholder:"密码",tabindex:"3","show-password":""},{prefix:o(()=>[e(p,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"checkPassword"},{default:o(()=>[e(m,{modelValue:t(_).checkPassword,"onUpdate:modelValue":l[9]||(l[9]=a=>t(_).checkPassword=a),clearable:"",type:"password",placeholder:"确认密码",tabindex:"4","show-password":""},{prefix:o(()=>[e(p,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(S,{loading:t(h),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(J,["prevent"])},{default:o(()=>[y(" 注册 ")]),_:1},8,["loading"]),s("div",Ie,[$e,e($,{type:"primary",underline:!1,onClick:l[10]||(l[10]=a=>c.value="login")},{default:o(()=>[y(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[q,t(c)==="register"]]),L(e(F,{ref_key:"resetFormRef",ref:I,model:t(V),rules:t(O),class:"login-form"},{default:o(()=>[Fe,s("div",null,[e(w,{prop:"account"},{default:o(()=>[e(m,{modelValue:t(V).account,"onUpdate:modelValue":l[11]||(l[11]=a=>t(V).account=a),clearable:"",placeholder:"用户名",type:"text",tabindex:"1"},{prefix:o(()=>[e(p,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"captcha"},{default:o(()=>[e(m,{modelValue:t(V).captcha,"onUpdate:modelValue":l[12]||(l[12]=a=>t(V).captcha=a),clearable:"",placeholder:"验证码",type:"text",tabindex:"2"},{prefix:o(()=>[e(p,{name:"lucide:shield-check"})]),append:o(()=>[e(S,null,{default:o(()=>[y("发送验证码")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"newPassword"},{default:o(()=>[e(m,{modelValue:t(V).newPassword,"onUpdate:modelValue":l[13]||(l[13]=a=>t(V).newPassword=a),clearable:"",type:"password",placeholder:"新密码",tabindex:"3","show-password":""},{prefix:o(()=>[e(p,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),e(S,{loading:t(h),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(Q,["prevent"])},{default:o(()=>[y(" 确认 ")]),_:1},8,["loading"]),s("div",Le,[e($,{type:"primary",underline:!1,onClick:l[14]||(l[14]=a=>c.value="login")},{default:o(()=>[y(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"]),[[q,t(c)==="reset"]])]),e(fe,{color:t(x).mode==="mobile"?"#333333":"#ffffff"},null,8,["color"])])}}}),bt=ve(qe,[["__scopeId","data-v-b6ecbe54"]]);export{bt as default};
